<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='login.css') }}">
    <link rel="icon" href="../static/images/favicon.png">
    <script src="https://kit.fontawesome.com/3b57b3cea0.js" crossorigin="anonymous"></script>
</head>

<body>
    
    <div class="container">
        <div class="left">
            <!-- Flash message start -->
            <div  class="flash-messages">
                <!-- <p>This is Error message</p> -->
                <div class="msg">
                    {% with messages = get_flashed_messages() %}
                    {% if messages %}
                    <div class="inner">
                        {{ messages[-1] }}  <!-- Display the last message in the list -->
                    </div>
                    
                    {% endif %}
                    {% endwith %}
                </div>
                <!-- const closeBtn=document.querySelector('.close-btn');
        closeBtn.addEventListener('click',(e)=>{
            fmsg.classList.remove('active')
        }) -->
                <!-- <div class="close-btn">&times;</div> -->
            </div>
            <!--Flash ends  -->
        </div>
        <div class="right">
            <div class="login-box">
                <div class="box">
                    <div class="header">
                        <div class="btn btn1">
                            <a href="">
                                Login
                            </a>
                        </div>
                        <div class="btn btn2">
                            <a href="{{url_for('register')}}">
                                Register
                            </a>
                        </div>
                    </div>

                    <div class="login-details">
                        <form action="/login" method="POST"> <!-- Updated form action -->
                            <div class="ip username">
                                <input type="text" name="user_id" id="user_id" required> <!-- Added User ID field -->
                                <label for="user_id">User ID</label>
                            </div>
                            <div class="ip password">
                                <input type="password" name="password" id="password" required>
                                <label for="password">Password</label>
                                <i class="fa-solid fa-eye-slash " style="color: #f02828;"></i>
                            </div>
                            <div class="btns">
                                <div class="checkbox btn-donor">
                                    <input type="radio" name="admin" id="donor" value="donor" checked>
                                    <label for="donor">Donor</label>
                                </div>
                                <div class="checkbox btn-hospital">
                                    <input type="radio" name="admin" id="hospital" value="hospital">
                                    <label for="hospital">Hospital</label>
                                </div>
                                <div class="checkbox btn-admin">
                                    <input type="radio" name="admin" id="admin" value="admin">
                                    <label for="admin">Admin</label>
                                </div>
                            </div>
                            <div class="forget-password">
                                <a href="{{url_for('forget')}}">Forget Password?</a>
                            </div>
                            <div class="log-in-btn">
                                <button type="submit">Submit</button> <!-- Added type="submit" -->
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const ip=document.getElementById('password');
        const icon=document.querySelector('.password i');

        icon.addEventListener('click',(e)=>{
            if(ip.value != ""){

                if(e.target.classList.contains('fa-eye-slash')){
                    e.target.classList.remove('fa-eye-slash');
                    e.target.classList.add('fa-eye');
                    ip.type='text';
                }
                else{
                    e.target.classList.remove('fa-eye');
                    e.target.classList.add('fa-eye-slash');
                    ip.type='password';
                }
            }
        })

        const fmsg=document.querySelector('.flash-messages');
        
        
        setTimeout(()=>{
            if(fmsg.classList.contains('active')){
                fmsg.classList.remove('active');
            }
        },3000)
        
        const ims=document.querySelector('.inner');
        if(ims.textContent != ""){
            fmsg.classList.add('active');
        }


        


    </script>

</body>

</html>